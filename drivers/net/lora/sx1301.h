// SPDX-License-Identifier: GPL-2.0-or-later
/*
 * Semtech SX1301 lora concentrator
 *
 * Copyright (c) 2018   Ben Whitten
 */

#ifndef _SX1301_
#define _SX1301_

#define SX1301_CHIP_VERSION 103

#define SX1301_MCU_FW_BYTE 8192
#define SX1301_MCU_ARB_FW_VERSION 1
#define SX1301_MCU_AGC_FW_VERSION 4
#define SX1301_MCU_AGC_CAL_FW_VERSION 2

/* Page independent */
#define SX1301_PAGE     0x00
#define SX1301_VER      0x01
#define SX1301_RDBAL    0x02
#define SX1301_RDBAH    0x03
#define SX1301_RDBD     0x04
#define SX1301_TDBA     0x05
#define SX1301_TDBD     0x06
#define SX1301_MPA      0x09
#define SX1301_MPD      0x0A
#define SX1301_RPNS     0x0B
#define SX1301_RPAPL    0x0C
#define SX1301_RPAPH    0x0D
#define SX1301_RPS      0x0E
#define SX1301_RPPS     0x0F
#define SX1301_GEN      0x10
#define SX1301_CKEN     0x11
#define SX1301_BIST     0x12
#define SX1301_BIST_S   0x13
#define SX1301_GPSI     0x1B
#define SX1301_GPSO     0x1C
#define SX1301_GPMODE   0x1D
#define SX1301_GPREGI   0x1E
#define SX1301_GPREGO   0x1F
#define SX1301_AGCSTS   0x20
#define SX1301_ARBSTS   0x7D
#define SX1301_ID       0x7F

#define SX1301_VIRT_BASE    0x100
#define SX1301_PAGE_LEN     0x80
#define SX1301_PAGE_BASE(n) (SX1301_VIRT_BASE + (SX1301_PAGE_LEN * n))

/* Page 0 */
#define SX1301_IQCFG        (SX1301_PAGE_BASE(0) + 0x21)
#define SX1301_DECCFG       (SX1301_PAGE_BASE(0) + 0x22)
#define SX1301_CHRS         (SX1301_PAGE_BASE(0) + 0x23)
#define SX1301_IF0L         (SX1301_PAGE_BASE(0) + 0x24)
#define SX1301_IF0H         (SX1301_PAGE_BASE(0) + 0x25)
#define SX1301_IF1L         (SX1301_PAGE_BASE(0) + 0x26)
#define SX1301_IF1H         (SX1301_PAGE_BASE(0) + 0x27)
#define SX1301_IF2L         (SX1301_PAGE_BASE(0) + 0x28)
#define SX1301_IF2H         (SX1301_PAGE_BASE(0) + 0x29)
#define SX1301_IF3L         (SX1301_PAGE_BASE(0) + 0x2A)
#define SX1301_IF3H         (SX1301_PAGE_BASE(0) + 0x2B)
#define SX1301_IF4L         (SX1301_PAGE_BASE(0) + 0x2C)
#define SX1301_IF4H         (SX1301_PAGE_BASE(0) + 0x2D)
#define SX1301_IF5L         (SX1301_PAGE_BASE(0) + 0x2E)
#define SX1301_IF5H         (SX1301_PAGE_BASE(0) + 0x2F)
#define SX1301_IF6L         (SX1301_PAGE_BASE(0) + 0x30)
#define SX1301_IF6H         (SX1301_PAGE_BASE(0) + 0x31)
#define SX1301_IF7L         (SX1301_PAGE_BASE(0) + 0x32)
#define SX1301_IF7H         (SX1301_PAGE_BASE(0) + 0x33)
#define SX1301_IF8L         (SX1301_PAGE_BASE(0) + 0x34)
#define SX1301_IF8H         (SX1301_PAGE_BASE(0) + 0x35)
#define SX1301_IF9L         (SX1301_PAGE_BASE(0) + 0x36)
#define SX1301_IF9H         (SX1301_PAGE_BASE(0) + 0x37)
#define SX1301_COR0DETEN    (SX1301_PAGE_BASE(0) + 0x41)
#define SX1301_COR1DETEN    (SX1301_PAGE_BASE(0) + 0x42)
#define SX1301_COR2DETEN    (SX1301_PAGE_BASE(0) + 0x43)
#define SX1301_COR3DETEN    (SX1301_PAGE_BASE(0) + 0x44)
#define SX1301_COR4DETEN    (SX1301_PAGE_BASE(0) + 0x45)
#define SX1301_COR5DETEN    (SX1301_PAGE_BASE(0) + 0x46)
#define SX1301_COR6DETEN    (SX1301_PAGE_BASE(0) + 0x47)
#define SX1301_COR7DETEN    (SX1301_PAGE_BASE(0) + 0x48)
#define SX1301_CORR_CFG	    (SX1301_PAGE_BASE(0) + 0x4E)
#define SX1301_MODEM_START_RDX4_L (SX1301_PAGE_BASE(0) + 0x51)
#define SX1301_MODEM_START_RDX4_H (SX1301_PAGE_BASE(0) + 0x52)
#define SX1301_MODEM_START_SF12_RDX4_L (SX1301_PAGE_BASE(0) + 0x53)
#define SX1301_MODEM_START_SF12_RDX4_H (SX1301_PAGE_BASE(0) + 0x54)
#define SX1301_TIMTRAK2     (SX1301_PAGE_BASE(0) + 0x5D)
#define SX1301_PRSYMBNBL    (SX1301_PAGE_BASE(0) + 0x60)
#define SX1301_PRSYMBNBH    (SX1301_PAGE_BASE(0) + 0x61)
#define SX1301_MISC_CFG1    (SX1301_PAGE_BASE(0) + 0x63)
#define SX1301_MISC_CFG2    (SX1301_PAGE_BASE(0) + 0x64)
#define SX1301_HEADER_CFG1  (SX1301_PAGE_BASE(0) + 0x65)
#define SX1301_HEADER_CFG2  (SX1301_PAGE_BASE(0) + 0x66)
#define SX1301_GAIN_OFFSET  (SX1301_PAGE_BASE(0) + 0x68)
#define SX1301_FORCE_CTRL   (SX1301_PAGE_BASE(0) + 0x69)
#define SX1301_MCU_CTRL     (SX1301_PAGE_BASE(0) + 0x6A)
#define SX1301_CHANN_SELECT_RSSI	(SX1301_PAGE_BASE(0) + 0x6B)
#define SX1301_RSSI_BB_DEFAULT_VALUE	(SX1301_PAGE_BASE(0) + 0x6C)
#define SX1301_RSSI_DEC_DEFAULT_VALUE	(SX1301_PAGE_BASE(0) + 0x6D)
#define SX1301_RSSI_CHANN_DEFAULT_VALUE (SX1301_PAGE_BASE(0) + 0x6E)
#define SX1301_RSSI_BB_FILTER_ALPHA	(SX1301_PAGE_BASE(0) + 0x6F)
#define SX1301_RSSI_DEC_FILTER_ALPHA	(SX1301_PAGE_BASE(0) + 0x70)
#define SX1301_RSSI_CHANN_FILTER_ALPHA	(SX1301_PAGE_BASE(0) + 0x71)

/* Page 1 */
#define SX1301_TXTRIG               (SX1301_PAGE_BASE(1) + 0x21)
#define SX1301_TX_OFFSET_I          (SX1301_PAGE_BASE(1) + 0x27)
#define SX1301_TX_OFFSET_Q          (SX1301_PAGE_BASE(1) + 0x28)
#define SX1301_TX_CFG1              (SX1301_PAGE_BASE(1) + 0x29)
#define SX1301_TX_CFG2              (SX1301_PAGE_BASE(1) + 0x2A)
#define SX1301_BHIMPCFG1            (SX1301_PAGE_BASE(1) + 0x2B)
#define SX1301_BHIMPCFG2            (SX1301_PAGE_BASE(1) + 0x2C)
#define SX1301_BHSYNCPOS            (SX1301_PAGE_BASE(1) + 0x2E)
#define SX1301_BHPRSYMNBL           (SX1301_PAGE_BASE(1) + 0x2F)
#define SX1301_MBWSSF_MISC_CFG1     (SX1301_PAGE_BASE(1) + 0x3A)
#define SX1301_MBWSSF_MISC_CFG2     (SX1301_PAGE_BASE(1) + 0x3B)
#define SX1301_MBWSSF_MISC_CFG3     (SX1301_PAGE_BASE(1) + 0x3C)
#define SX1301_MBWSSF_MISC_CFG4     (SX1301_PAGE_BASE(1) + 0x3D)
#define SX1301_TX_STATUS            (SX1301_PAGE_BASE(1) + 0x3E)
#define SX1301_FSK_CFG1             (SX1301_PAGE_BASE(1) + 0x3F)
#define SX1301_FSK_CFG2             (SX1301_PAGE_BASE(1) + 0x40)
#define SX1301_FSK_ERROR_OSR_TOL    (SX1301_PAGE_BASE(1) + 0x41)
#define SX1301_FSK_BR_RATIOL        (SX1301_PAGE_BASE(1) + 0x42)
#define SX1301_FSK_BR_RATIOH        (SX1301_PAGE_BASE(1) + 0x43)
#define SX1301_FSK_REF_PATTERN_0    (SX1301_PAGE_BASE(1) + 0x44)
#define SX1301_FSK_REF_PATTERN_1    (SX1301_PAGE_BASE(1) + 0x45)
#define SX1301_FSK_REF_PATTERN_2    (SX1301_PAGE_BASE(1) + 0x46)
#define SX1301_FSK_REF_PATTERN_3    (SX1301_PAGE_BASE(1) + 0x47)
#define SX1301_FSK_REF_PATTERN_4    (SX1301_PAGE_BASE(1) + 0x48)
#define SX1301_FSK_REF_PATTERN_5    (SX1301_PAGE_BASE(1) + 0x49)
#define SX1301_FSK_REF_PATTERN_6    (SX1301_PAGE_BASE(1) + 0x4A)
#define SX1301_FSK_REF_PATTERN_7    (SX1301_PAGE_BASE(1) + 0x4B)
#define SX1301_FSK_PKT_LENGTH       (SX1301_PAGE_BASE(1) + 0x4C)
#define SX1301_FSK_TX		    (SX1301_PAGE_BASE(1) + 0x4D)
#define SX1301_FSK_AAFC             (SX1301_PAGE_BASE(1) + 0x52)
#define SX1301_FSK_PATTERN_TIMEOUT_CFGL (SX1301_PAGE_BASE(1) + 0x53)
#define SX1301_FSK_PATTERN_TIMEOUT_CFGH (SX1301_PAGE_BASE(1) + 0x54)

/* Page 2 */
#define SX1301_RADIO_A_SPI_DATA     (SX1301_PAGE_BASE(2) + 0x21)
#define SX1301_RADIO_A_SPI_DATA_RB  (SX1301_PAGE_BASE(2) + 0x22)
#define SX1301_RADIO_A_SPI_ADDR     (SX1301_PAGE_BASE(2) + 0x23)
#define SX1301_RADIO_A_SPI_CS       (SX1301_PAGE_BASE(2) + 0x25)
#define SX1301_RADIO_B_SPI_DATA     (SX1301_PAGE_BASE(2) + 0x26)
#define SX1301_RADIO_B_SPI_DATA_RB  (SX1301_PAGE_BASE(2) + 0x27)
#define SX1301_RADIO_B_SPI_ADDR     (SX1301_PAGE_BASE(2) + 0x28)
#define SX1301_RADIO_B_SPI_CS       (SX1301_PAGE_BASE(2) + 0x2A)
#define SX1301_RADIO_CFG            (SX1301_PAGE_BASE(2) + 0x2B)
#define SX1301_PA_GAIN              (SX1301_PAGE_BASE(2) + 0x2C)
#define SX1301_FE_A_CTRL_LUT        (SX1301_PAGE_BASE(2) + 0x2D)
#define SX1301_FE_B_CTRL_LUT        (SX1301_PAGE_BASE(2) + 0x2E)
#define SX1301_VALID_HEADER_COUNTER_M_WSSF  (SX1301_PAGE_BASE(2) + 0x38)
#define SX1301_VALID_HEADER_COUNTER_FSK     (SX1301_PAGE_BASE(2) + 0x39)
#define SX1301_VALID_PACKET_COUNTER_MB_SSF  (SX1301_PAGE_BASE(2) + 0x3A)
#define SX1301_VALID_PACKET_COUNTER_FSK     (SX1301_PAGE_BASE(2) + 0x3B)
#define SX1301_CHANN_RSSI           (SX1301_PAGE_BASE(2) + 0x3C)
#define SX1301_BB_RSSI              (SX1301_PAGE_BASE(2) + 0x3D)
#define SX1301_DEC_RSSI             (SX1301_PAGE_BASE(2) + 0x3E)
#define SX1301_DBG_MCU_DATA         (SX1301_PAGE_BASE(2) + 0x3F)
#define SX1301_DBG_ARB_MCU_RAM_DATA (SX1301_PAGE_BASE(2) + 0x40)
#define SX1301_DBG_AGC_MCU_RAM_DATA (SX1301_PAGE_BASE(2) + 0x41)
#define SX1301_TIMESTAMP_0          (SX1301_PAGE_BASE(2) + 0x46)
#define SX1301_TIMESTAMP_1          (SX1301_PAGE_BASE(2) + 0x47)
#define SX1301_TIMESTAMP_2          (SX1301_PAGE_BASE(2) + 0x48)
#define SX1301_TIMESTAMP_3          (SX1301_PAGE_BASE(2) + 0x49)
#define SX1301_DBG_ARB_MCU_RAM_ADDR (SX1301_PAGE_BASE(2) + 0x50)
#define SX1301_DBG_AGC_MCU_RAM_ADDR (SX1301_PAGE_BASE(2) + 0x51)
#define SX1301_SPI_MASTER_CFG       (SX1301_PAGE_BASE(2) + 0x52)
#define SX1301_GPS_CFG              (SX1301_PAGE_BASE(2) + 0x59)

/* Page 3 */
#define SX1301_EMERGENCY_FORCE_HOST_CTRL (SX1301_PAGE_BASE(3) + 0x7F)

#define SX1301_MAX_REGISTER         (SX1301_PAGE_BASE(3) + 0x7F)

#endif
